#linux #bash #scripts #monitor 

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ swap –º–æ–∂–µ—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –Ω–µ—Ö–≤–∞—Ç–∫—É –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏. –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Ç–µ–∫—É—â–∏–π –æ–±—ä—ë–º –∑–∞–Ω—è—Ç–æ–≥–æ swap, –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ø–æ—Ä–æ–≥–∞ –∏ –ø–æ–º–æ–≥–∞–µ—Ç –≤–æ–≤—Ä–µ–º—è –≤—ã—è–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é.

```bash
#!/bin/bash

LOG_FILE="/var/log/swap_monitor.log"
THRESHOLD_MB=100  # –ü–æ—Ä–æ–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è swap –≤ –º–µ–≥–∞–±–∞–π—Ç–∞—Ö

echo "üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è swap... $(date)" | tee -a "$LOG_FILE"

# –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–π –æ–±—ä—ë–º –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ swap –≤ –ú–ë
USED_SWAP=$(free -m | awk '/Swap:/ {print $3}')

if [ "$USED_SWAP" -ge "$THRESHOLD_MB" ]; then
    echo "‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ swap: ${USED_SWAP}MB (–≤—ã—à–µ –ø–æ—Ä–æ–≥–∞ ${THRESHOLD_MB}MB)" | tee -a "$LOG_FILE"
else
    echo "‚úÖ Swap –≤ –Ω–æ—Ä–º–µ: ${USED_SWAP}MB" | tee -a "$LOG_FILE"
fi

echo "üîö –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞." | tee -a "$LOG_FILE"
```


- `free -m` –±—ã—Å—Ç—Ä–æ –¥–∞—ë—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ RAM –∏ swap
- –°–∫—Ä–∏–ø—Ç –ª–æ–≥–∏—Ä—É–µ—Ç –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ø–æ—Ä–æ–≥–∞ ‚Äî –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫ email/—Ç–µ–ª–µ–≥—Ä–∞–º-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º
- –£–¥–æ–±–µ–Ω –¥–ª—è —Å–µ—Ä–≤–µ—Ä–æ–≤ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–π –û–ó–£ –∏–ª–∏ –ø–æ–¥–æ–∑—Ä–µ–Ω–∏–µ–º –Ω–∞ —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏

==–î–æ–±–∞–≤—å—Ç–µ –≤ crontab –¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏:==
```ini
*/30 * * * * /path/to/swap_monitor.sh
```