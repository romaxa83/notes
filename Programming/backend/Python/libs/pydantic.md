#python #package 

repo - https://github.com/pydantic/pydantic

<u>Pydantic</u>

–í FastApi –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫ Pydantic —ç—Ç–æ - ==–±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è Python, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é –ø–æ–¥—Å–∫–∞–∑–æ–∫ —Ç–∏–ø–æ–≤==.¬†–û–Ω–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç –≤—Ö–æ–¥—è—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º —Ç–∏–ø–∞–º –∏ —Ñ–æ—Ä–º–∞—Ç–∞–º, –∞ —Ç–∞–∫–∂–µ –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç –µ—ë –≤ –Ω—É–∂–Ω—ã–π –≤–∏–¥.¬†–≠—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–¥ –±–æ–ª–µ–µ –Ω–∞–¥—ë–∂–Ω—ã–º, –ø–æ–Ω—è—Ç–Ω—ã–º –∏ –ø–æ–º–æ–≥–∞–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –æ—à–∏–±–æ–∫ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.

```python
# –ü–æ–¥—Å–∫–∞–∑–∫–∏ —Ç–∏–ø–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –º–æ–≥—É—Ç –≤–∫–ª—é—á–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ç–∏–ø:
name: type

# –∏–ª–∏ —Ç–∞–∫–∂–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –∑–Ω–∞—á–µ–Ω–∏–µ–º:
name: type = value

```
–¢–∏–ø –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–¥–Ω–∏–º –∏–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –ø—Ä–æ—Å—Ç—ã—Ö —Ç–∏–ø–æ–≤ Python, —Ç–∞–∫–∏—Ö –∫–∞–∫ int –∏–ª–∏ str, –∏–ª–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–µ–π, —Ç–∞–∫–æ–π –∫–∞–∫ tuple, list –∏–ª–∏ dict:
```python
thing: str = "yeti"
```

–ú–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –≤–∫–ª—é—á–∞—Ç—å –ø–æ–¥—Ç–∏–ø—ã –∫–æ–ª–ª–µ–∫—Ü–∏–π:
```python
name: dict[keytype, valtype] = {key1: val1, key2: val2}
```

–ú–æ–¥—É–ª—å —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–µ–∑–Ω—ã–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –¥–ª—è –ø–æ–¥—Ç–∏–ø–æ–≤. –ù–∞–∏–±–æ–ª–µ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∏–∑ –Ω–∏—Ö —Å–ª–µ–¥—É—é—â–∏–µ:
- Any ‚Äî –ª—é–±–æ–π —Ç–∏–ø;
- Union ‚Äî –ª—é–±–æ–π –∏–∑ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä Union[str, int].

>–í Python, –Ω–∞—á–∏–Ω–∞—è —Å –≤–µ—Ä—Å–∏–∏ 3.10, –º–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å type1 | type2, –∞ –Ω–µ Union[type1,type2].

```python
from typing import Any

responses: dict[str, Any] = {"Marco": "Polo", "answer": 42}

# –ò–ª–∏, –µ—Å–ª–∏ –±—ã—Ç—å –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–º–∏:

from typing import Union

responses: dict[str, Union[str, int]] = {"Marco": "Polo", "answer": 42}

# –ª–∏–±–æ (–≤ Python 3.10 –∏ –±–æ–ª–µ–µ –ø–æ–∑–¥–Ω–∏—Ö –≤–µ—Ä—Å–∏—è—Ö):

responses: dict[str, str | int] = {"Marco": "Polo", "answer": 42}
```

–° —Ñ—É–Ω–∫—Ü–∏—è–º–∏ —Ä–∞–±–æ—Ç–∞–µ–º —Ç–∞–∫:
```python
# –í –ø–æ–¥—Å–∫–∞–∑–∫–µ —Ç–∏–ø–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–º–µ—Å—Ç–æ –¥–≤–æ–µ—Ç–æ—á–∏—è –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Å—Ç—Ä–µ–ª–∫–∞:

function(args) -> type:

# –í–æ—Ç –ø—Ä–∏–º–µ—Ä –≤–æ–∑–≤—Ä–∞—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ Pydantic:

def get_thing() -> str:
	return "yeti"

# –ú–æ–∂–Ω–æ –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –ª—é–±–æ–π —Ç–∏–ø, –≤–∫–ª—é—á–∞—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã –∏–ª–∏ –∏—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏.
```

Pydantic –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–¥–∞—Ç—å –ª—é–±—É—é –∫–æ–º–±–∏–Ω–∞—Ü–∏—é —Å–ª–µ–¥—É—é—â–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫:
- –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∏ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ;
- –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è;
- –æ–∂–∏–¥–∞–µ–º—ã–π —Ç–∏–ø –∏–ª–∏ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö;
- –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–π;
- –¥—Ä—É–≥–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ñ—É–Ω–∫—Ü–∏–π, –µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ;
- —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é –∏ –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é

---
–¶–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (conint) –∏–ª–∏ —á–∏—Å–ª–æ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π:
* gt ‚Äî –±–æ–ª—å—à–µ —á–µ–º;
* lt ‚Äî –º–µ–Ω—å—à–µ —á–µ–º;
* ge ‚Äî –±–æ–ª—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ;
* le ‚Äî –º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ;
* multiple_of ‚Äî —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ, –∫—Ä–∞—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏—é.

–°—Ç—Ä–æ–∫–æ–≤–æ–µ (constr) –∑–Ω–∞—á–µ–Ω–∏–µ:
* min_length ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –≤ —Å–∏–º–≤–æ–ª–∞—Ö (–Ω–µ –≤ –±–∞–π—Ç–∞—Ö);
* max_length ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –≤ —Å–∏–º–≤–æ–ª–∞—Ö;
* to_upper ‚Äî –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ–ø–∏—Å–Ω—ã–µ –±—É–∫–≤—ã;
* to_lower ‚Äî –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ —Å—Ç—Ä–æ—á–Ω—ã–µ –±—É–∫–≤—ã;
* regex ‚Äî —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º –≤—ã—Ä–∞–∂–µ–Ω–∏–µ–º Python.

–ö–æ—Ä—Ç–µ–∂, —Å–ø–∏—Å–æ–∫ –∏–ª–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–æ:
* min_items ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤;
* max_items ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤.

–ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ <u>constr</u> –æ–∑–Ω–∞—á–∞–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É (constrained string).

##### üî∏ –°—Ç—Ä–æ–∫–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç–æ–π
```python
class Item(BaseModel):
    name: str = Field(min_length=1) # –°—Ç—Ä–æ–∫–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç–æ–π (–¥–ª–∏–Ω–∞ >= 1)
    description: str | None = None # –ú–æ–∂–µ—Ç –±—ã—Ç—å None
```
