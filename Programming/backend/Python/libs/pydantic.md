#python #package 

repo - https://github.com/pydantic/pydantic

<u>Pydantic</u>

В FastApi используется библиотек Pydantic это - ==библиотека для Python, которая используется для валидации и структурирования данных с помощью подсказок типов==. Она позволяет создавать модели данных, которые автоматически проверяют входящую информацию на соответствие определённым типам и форматам, а также преобразуют её в нужный вид. Это делает код более надёжным, понятным и помогает избежать ошибок при работе с данными из различных источников.

```python
# Подсказки типа переменной могут включать только тип:
name: type

# или также инициализировать переменную значением:
name: type = value

```
Тип может быть одним из стандартных простых типов Python, таких как int или str, или коллекцией, такой как tuple, list или dict:
```python
thing: str = "yeti"
```

Можно также включать подтипы коллекций:
```python
name: dict[keytype, valtype] = {key1: val1, key2: val2}
```

Модуль типизации содержит полезные дополнения для подтипов. Наиболее распространенные из них следующие:
- Any — любой тип;
- Union — любой из указанных типов, например Union[str, int].

>В Python, начиная с версии 3.10, можно написать type1 | type2, а не Union[type1,type2].

```python
from typing import Any

responses: dict[str, Any] = {"Marco": "Polo", "answer": 42}

# Или, если быть более точными:

from typing import Union

responses: dict[str, Union[str, int]] = {"Marco": "Polo", "answer": 42}

# либо (в Python 3.10 и более поздних версиях):

responses: dict[str, str | int] = {"Marco": "Polo", "answer": 42}
```

С функциями работаем так:
```python
# В подсказке типа возврата функции вместо двоеточия применяется стрелка:

function(args) -> type:

# Вот пример возврата функции при использовании Pydantic:

def get_thing() -> str:
	return "yeti"

# Можно задействовать любой тип, включая определенные классы или их комбинации.
```

Pydantic предоставляет возможность задать любую комбинацию следующих проверок:
- обязательные и необязательные;
- значение по умолчанию, если не указано, но требуется;
- ожидаемый тип или типы данных;
- ограничения диапазона значений;
- другие проверки на основе функций, если необходимо;
- сериализацию и десериализацию

---
Целочисленное значение (conint) или число с плавающей точкой:
* gt — больше чем;
* lt — меньше чем;
* ge — больше или равно;
* le — меньше или равно;
* multiple_of — целое число, кратное значению.

Строковое (constr) значение:
* min_length — минимальная длина в символах (не в байтах);
* max_length — максимальная длина в символах;
* to_upper — преобразование в прописные буквы;
* to_lower — преобразование в строчные буквы;
* regex — сопоставление с регулярным выражением Python.

Кортеж, список или множество:
* min_items — минимальное количество элементов;
* max_items — максимальное количество элементов.

Ключевое слово <u>constr</u> означает ограниченную строку (constrained string).