#database #mysql #sql

### üîπ –ó–∞–π—Ç–∏ –≤ –±–¥ —á–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª
```bash
mysql -h 192.168.189.1 -u root -P 3310 -ppassword
```
---
### üîπ –ö–æ–º–∞–Ω–¥—ã –≤ –∫–æ–Ω—Å–æ–ª–∏

üî∏–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –±–¥
```sql
SHOW databases;
```

üî∏ –≤—ã–±—Ä–∞—Ç—å –±–¥ —Å –∏–º–µ–Ω–µ–º name_bd
```sql
USE name_bd;
```

üî∏–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –±–¥
```sql
SHOW tables;
```

üî∏–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã —Å –∏–º–µ–Ω–µ–º name_table
```sql
desc name_table;
```

üî∏–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç
```sql
show processlist;
```

üî∏–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–¥–∏—Ä–æ–≤–∫—É –±–¥
```sql
SHOW VARIABLES LIKE "character_set_database";
```

üî∏—É–¥–∞–ª—è–µ—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
```sql
DROP DATABASE name_db;
```

üî∏—É–¥–∞–ª—è–µ—Ç —Ç–∞–±–ª–∏—Ü—É
```sql
DROP TABLE user;
```

üî∏—Å–æ–∑–¥–∞–µ—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö ([[CREATE TABLE#üîπ–ë–∞–∑–æ–≤—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å CREATE TABLE|CREATE TABLE]])
```sql
CREATE DATABASE name_db;
```

üî∏–æ—á–∏—Å—Ç–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É –≤ –±–¥
```sql
TRUNCATE TABLE –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã; 
```

---

### üîπ –ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å –≤ mysql

1) service mysql stop
2) /usr/bin/mysqld_safe --skip-grant-tables --user=root &
3) mysql -u root
4) mysql> UPDATE mysql.user SET Password=PASSWORD('—Ç—É—Ç_–ø–∏—à–µ–º_–Ω–æ–≤—ã–π_–ø–∞—Ä–æ–ª—å') WHERE User='root';
   mysql> FLUSH PRIVILEGES;
   mysql> exit
 5) service mysql restart
 ---
###  üîπ DUMP

üî∏–ó–∞–≥—Ä—É–∑–∫–∞ dump —á–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª
```bash
mysql -u user_login -p password -h host db_name < path/to/file/file.sql
```

> –µ—Å–ª–∏  —É–∫–∞–∑–∞—Ç—å -v ,—Ç–æ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –±—É–¥–µ—Ç –≤—ã–≤–æ–¥–∏—Ç—å—Å—è ,—á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –±–¥

üî∏–í—ã–≥—Ä—É–∑–∫–∞ dump
```bash
mysqldump -u [username] -p[password] [database] > [dump_name.sql] 
```

>  –ø–æ—Å–ª–µ [database] –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–∏ —Ç–∞–±–ª–∏—Ü—ã  –∏ —Ç–æ–≥–¥–∞ –±—ç–∫–∞–ø –±—É–¥–µ—Ç —Ç–æ–ª—å–∫–æ —ç—Ç–æ–π —Ç–∞–±–ª–∏—Ü—ã
#### –§–ª–∞–≥–∏
https://dev.mysql.com/doc/refman/8.0/en/mysqldump.html

üî∏—É–∫–∞–∑—ã–≤–∞–µ—Ç —á—Ç–æ –Ω—É–∂–Ω–æ –¥–∞–º–ø —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–¥, –±–µ–∑ –¥–∞–Ω–Ω—ã—Ö
```bash
--no-data
``` 

üî∏–≤ –¥–∞–º–ø–µ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º —Å–æ–∑–¥–∞–Ω–∏–µ–º —Ç–∞–±–ª–∏—Ü—ã –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–∞ —Å –µ—ë —É–¥–∞–ª–µ–Ω–∏–µ–º. –¢–æ –µ—Å—Ç—å –ø—Ä–∏ –∑–∞–ª–∏–≤–∫–µ –¥–∞–º–ø–∞ —Å–Ω–∞—á–∞–ª–∞ —É–¥–∞–ª—è–µ—Ç—Å—è —Ç–∞–±–ª–∏—Ü–∞, –ø–æ—Ç–æ–º —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—É—Å—Ç–∞—è –∏ –≤ –Ω–µ—ë –∑–∞–ª–∏–≤–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –∏–∑ –¥–∞–º–ø–∞. –ò —Ç–∞–∫ –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
```bash
--add-drop-table 
```

üî∏–≤ –¥–∞–º–ø–µ –≤ —Å—Ç—Ä–æ–∫–µ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º —Ç–∞–±–ª–∏—Ü—ã —Å—Ç–∞–≤–∏—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞ –Ω–∞ –µ–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫—É, –∞ –ø–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∑–∞–ª–∏–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–Ω–∏–º–∞–µ—Ç—Å—è. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Å–ø–µ—à–Ω—É—é –∑–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö –≤ —Ç–∞–±–ª–∏—Ü—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–º–ø–∞.
```bash
--add-locks
```

üî∏–≤ –¥–∞–º–ø –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∫–æ–º–∞–Ω–¥—ã –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
```bash
--create-options
```

üî∏–≤ –¥–∞–º–ø –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –æ—Ç–∫–ª—é—á–∞—é—â–∏–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ —Ä—è–¥–æ–º —Å –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥–æ–π insert. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É—Å–∫–æ—Ä–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–º–ø–∞, –∞ –∏–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞—é—Ç—Å—è, –∫–æ–≥–¥–∞ –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã.
```bash
--disable-keys
```

 üî∏–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Å–æ–±—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å multiple-row –¥–ª—è –∫–æ–º–∞–Ω–¥ insert
```bash
--extended-insert
```

üî∏–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ç–∞–±–ª–∏—Ü –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –¥–∞–º–ø–∞. –≠—Ç–æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä —á–∞—Å—Ç–µ–Ω—å–∫–æ –º–µ—à–∞–µ—Ç –≤ –¥–≤–∏–∂–∫–µ innodb –∏ –µ–≥–æ –ª—É—á—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å (–ø–∞—Ä–∞–º–µ—Ç—Ä, –∞ –Ω–µ –¥–≤–∏–∂–æ–∫)
```bash
--lock-tables 
```

üî∏—É—Å–∫–æ—Ä–µ–Ω–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç—Ä–æ–∫ —Ç–∞–±–ª–∏—Ü—ã
```bash
--quick
```

üî∏–¥–æ–±–∞–≤–ª—è–µ—Ç –≤ –¥–∞–º–ø –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–¥–∏—Ä–æ–≤–∫–∞—Ö
```bash
--set-charset
```

üî∏–æ—Ç–º–µ–Ω—è–µ—Ç –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫—É –≤—Ä–µ–º–µ–Ω–∏ (–µ—Å–ª–∏ –Ω–∞ –¥–≤—É—Ö —Ä–∞–∑–Ω–æ–µ –≤—Ä–µ–º—è —Å–µ—Ä–≤–µ—Ä–∞—Ö)
```bash
--skip-tz-utc
```

üî∏–∏—Å–∫–ª—é—á–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É (–≤ –ø—Ä–∏–º–µ—Ä–µ users)
```bash
--ignore-table=users
```

#### –†–∞–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

üî∏–°–æ–∑–¥–∞—Ç—å –∏ —Å–∂–∞—Ç—å –¥–∞–º–ø
```bash
mysqldump -uroot -proot DATABASE | gzip > ./db.sql.gz
```

üî∏–°–∂–∞—Ç—å SQL –¥–∞–º–ø
```bash
gzip --best < db_name.sql > db_name.sql.gz
```

üî∏–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–∂–∞—Ç—ã–π –¥–∞–º–ø
```bash
gunzip -c dump.sql.gz | mysql -uroot -hlocalhost -p%pass% %database%
```

üî∏–í—ã–¥–µ—Ä–Ω—É—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Ç–∞–±–ª–∏—Ü—É –∏–∑ –æ–±—â–µ–≥–æ –¥–∞–º–ø–∞
```bash
awk '/CREATE TABLE `table_name`/,/UNLOCK TABLES/' db_name.dump
```



---
