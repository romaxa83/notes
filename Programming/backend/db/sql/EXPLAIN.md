#database #sql

üîπ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç SQL, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.
#### üîπ –°–∏–Ω—Ç–∞–∫—Å–∏—Å

###### üî∏ MySQL
```sql
EXPLAIN SELECT * FROM users WHERE status='active';  
  
-- –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è  
EXPLAIN FORMAT=JSON SELECT * FROM users WHERE status='active';  
  
-- –ê–Ω–∞–ª–∏–∑ —Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º (MySQL 8.0+)  
EXPLAIN ANALYZE SELECT * FROM users WHERE status='active';
```

###### üî∏ PostgreSQL
```sql
EXPLAIN SELECT * FROM –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ WHERE status='active';  
  
-- –° –æ—Ü–µ–Ω–∫–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∏ –¥—Ä—É–≥–∏–º–∏ –¥–µ—Ç–∞–ª—è–º–∏  
EXPLAIN (ANALYZE, BUFFERS, FORMAT JSON) SELECT * FROM users WHERE status='active';
```

---
#### üîπ –û—Å–Ω–æ–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤—ã–≤–æ–¥–∞ EXPLAIN

–•–æ—Ç—è —Ñ–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞ EXPLAIN —Ä–∞–∑–ª–∏—á–∞–µ—Ç—Å—è –º–µ–∂–¥—É –°–£–ë–î, –æ–±—ã—á–Ω–æ –æ–Ω –≤–∫–ª—é—á–∞–µ—Ç —Å–ª–µ–¥—É—é—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:

üî∏–¢–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏
- **Sequential Scan** (Table Scan): –ü–æ–ª–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã.
- **Index Scan**: –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ —Å –ø–æ—Å–ª–µ–¥—É—é—â–∏–º –¥–æ—Å—Ç—É–ø–æ–º –∫ —Ç–∞–±–ª–∏—Ü–µ.
- **Index Only Scan**: –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ç–æ–ª—å–∫–æ –∏–∑ –∏–Ω–¥–µ–∫—Å–∞ –±–µ–∑ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ —Ç–∞–±–ª–∏—Ü–µ.
- **Bitmap Scan**: –°–æ–∑–¥–∞–Ω–∏–µ –±–∏—Ç–æ–≤–æ–π –∫–∞—Ä—Ç—ã —Å—Ç—Ä–æ–∫, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —É—Å–ª–æ–≤–∏—é.
- **Nested Loop/Hash/Merge Join**: –†–∞–∑–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü.

üî∏ –°—Ç–æ–∏–º–æ—Å—Ç—å
- **Cost**: –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ (–æ–±—ã—á–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ –¥–∏–∞–ø–∞–∑–æ–Ω: –Ω–∞—á–∞–ª—å–Ω–∞—è..–∫–æ–Ω–µ—á–Ω–∞—è).
- **Rows**: –û—Ü–µ–Ω–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã.
- **Width**: –û—Ü–µ–Ω–∫–∞ —Å—Ä–µ–¥–Ω–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ —Å—Ç—Ä–æ–∫–∏ –≤ –±–∞–π—Ç–∞—Ö.

üî∏ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–º, –∫–∞–∫–∏–µ –∏–Ω–¥–µ–∫—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º.
- –£—Å–ª–æ–≤–∏—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, –ø—Ä–∏–º–µ–Ω—è–µ–º—ã–µ –∫ –∏–Ω–¥–µ–∫—Å–∞–º.

üî∏–ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –ü–æ—Ä—è–¥–æ–∫, –≤ –∫–æ—Ç–æ—Ä–æ–º –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –æ–ø–µ—Ä–∞—Ü–∏–∏ (–æ–±—ã—á–Ω–æ –≤ –≤–∏–¥–µ –¥–µ—Ä–µ–≤–∞ –∏–ª–∏ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π).
---
#### üîπ  –ü—Ä–∏–º–µ—Ä –∞–Ω–∞–ª–∏–∑–∞ –≤—ã–≤–æ–¥–∞ EXPLAIN –≤ MySQL

```
+----+-------------+-------------+------------+------+---------------+------+---------+------+------+----------+-------------+  
| id | select_type | table       | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra       |  
+----+-------------+-------------+------------+------+---------------+------+---------+------+------+----------+-------------+  
|  1 | SIMPLE      | –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ | NULL       | ALL  | NULL          | NULL | NULL    | NULL | 1000 |    10.00 | Using where |  
+----+-------------+-------------+------------+------+---------------+------+---------+------+------+----------+-------------+
```

**–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞:**

- **id**: –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ SELECT –≤ –∑–∞–ø—Ä–æ—Å–µ.
- **select_type**: –¢–∏–ø SELECT (SIMPLE, PRIMARY, SUBQUERY –∏ —Ç.–¥.).
- **table**: –¢–∞–±–ª–∏—Ü–∞, –∫ –∫–æ—Ç–æ—Ä–æ–π –æ—Ç–Ω–æ—Å–∏—Ç—Å—è —ç—Ç–∞ —Å—Ç—Ä–æ–∫–∞ –≤—ã–≤–æ–¥–∞.
- **type**: –ú–µ—Ç–æ–¥ –¥–æ—Å—Ç—É–ø–∞ (ALL, index, range, ref –∏ —Ç.–¥.) ‚Äî –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.
- **possible_keys**: –ò–Ω–¥–µ–∫—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥–ª–∏ –±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è.
- **key**: –ò–Ω–¥–µ–∫—Å, –∫–æ—Ç–æ—Ä—ã–π —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è.
- **key_len**: –î–ª–∏–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π —á–∞—Å—Ç–∏ –∏–Ω–¥–µ–∫—Å–∞.
- **ref**: –°—Ç–æ–ª–±—Ü—ã –∏–ª–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å –∏–Ω–¥–µ–∫—Å–æ–º.
- **rows**: –û—Ü–µ–Ω–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å.
- **filtered**: –ü—Ä–æ—Ü–µ–Ω—Ç —Å—Ç—Ä–æ–∫, –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è–º–∏ WHERE.
- **Extra**: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (Using index, Using temporary –∏ —Ç.–¥.).
---

#### üîπ –ü—Ä–∏–º–µ—Ä –∞–Ω–∞–ª–∏–∑–∞ –≤—ã–≤–æ–¥–∞ EXPLAIN –≤ PostgreSQL

Seq Scan on –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏  (cost=0.00..17.50 rows=100 width=36)  
  Filter: (—Å—Ç–∞—Ç—É—Å = '–∞–∫—Ç–∏–≤–Ω—ã–π'::text)

```
QUERY PLAN                     
-----------------------------------------------------------------
 Seq Scan on –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏  (cost=0.00..17.50 rows=100 width=36)  
   Filter: (—Å—Ç–∞—Ç—É—Å = '–∞–∫—Ç–∏–≤–Ω—ã–π'::text)
```

**–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞:**

- **Seq Scan**: –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (–ø–æ–ª–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä —Ç–∞–±–ª–∏—Ü—ã).
- **cost=0.00..17.50**: –û—Ü–µ–Ω–∫–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ (–æ—Ç –Ω–∞—á–∞–ª–∞ –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è).
- **rows=100**: –û—Ü–µ–Ω–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö —Å—Ç—Ä–æ–∫.
- **width=36**: –°—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä —Å—Ç—Ä–æ–∫–∏ –≤ –±–∞–π—Ç–∞—Ö.
- **Filter**: –£—Å–ª–æ–≤–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, –ø—Ä–∏–º–µ–Ω—è–µ–º–æ–µ –∫ —Å—Ç—Ä–æ–∫–∞–º.
 
---
#### üîπ –¢–∏–ø—ã –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º (–ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏)

1. **ALL (Full Table Scan)**: –ü–æ–ª–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã ‚Äî –Ω–∞–∏–º–µ–Ω–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü.
2. **index**: –ü–æ–ª–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞.
3. **range**: –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –∏–Ω–¥–µ–∫—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `WHERE price BETWEEN 10 AND 20`).
4. **ref**: –î–æ—Å—Ç—É–ø –ø–æ –∏–Ω–¥–µ–∫—Å—É –¥–ª—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏–ª–∏ –ø–æ–∏—Å–∫–∞ –ø–æ –∫–ª—é—á—É (–Ω–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ–º—É).
5. **eq_ref**: –ß—Ç–µ–Ω–∏–µ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Å—Ç—Ä–æ–∫ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Ç–∞–±–ª–∏—Ü.
6. **const/system**: –¢–∞–±–ª–∏—Ü–∞ –∏–º–µ–µ—Ç –º–∞–∫—Å–∏–º—É–º –æ–¥–Ω—É —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —Å—Ç—Ä–æ–∫—É, –∫–æ—Ç–æ—Ä–∞—è —á–∏—Ç–∞–µ—Ç—Å—è –≤ –Ω–∞—á–∞–ª–µ –∑–∞–ø—Ä–æ—Å–∞.

---
#### üîπ–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ EXPLAIN

**–ü—Ä–∏–∑–Ω–∞–∫–∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º**

1. **Full Table Scan (—Ç–∏–ø=ALL)** –Ω–∞ –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö: –ú–æ–∂–µ—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –∏–Ω–¥–µ–∫—Å–æ–≤.
2. **–í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã (Using temporary)**: –°–æ–∑–¥–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–µ—Å—É—Ä—Å–æ–µ–º–∫–∏–º.
3. **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ñ–∞–π–ª–æ–≤ (Using filesort)**: –í–Ω–µ—à–Ω—è—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω–¥–µ–∫—Å.
4. **–í—ã—Å–æ–∫–∞—è –æ—Ü–µ–Ω–∫–∞ —Å—Ç—Ä–æ–∫**: –ï—Å–ª–∏ EXPLAIN –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –±–æ–ª—å—à–æ–≥–æ —á–∏—Å–ª–∞ —Å—Ç—Ä–æ–∫, —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏–∑–Ω–∞–∫–æ–º –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.
5. **–ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–Ω–¥–µ–∫—Å—ã**: –ï—Å–ª–∏ –≤ `possible_keys` –µ—Å—Ç—å –∏–Ω–¥–µ–∫—Å—ã, –Ω–æ –≤ `key` —É–∫–∞–∑–∞–Ω–æ NULL.
---