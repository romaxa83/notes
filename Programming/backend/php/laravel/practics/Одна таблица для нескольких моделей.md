#php #laravel 

> Бывает так, что в нашем приложении есть две модели (а иногда и больше), которые имеют одинаковые атрибуты, но отличаются некоторыми другими, к примеру нужны модели Podcast, Song и Soundtrack три модели имеют общие свойства: каждая из них представляет собой отдельный аудиофайл с битрейтом, именем, форматом, длиной, тегами и так далее. В то же время у них есть свойства, несовместимые друг с другом: подкаст принадлежит шоу, песня — альбому, а саундтрек — фильму

==РЕШЕНИЕ==: Одна таблица, чтобы править всеми

Вам нужна только одна таблица с именем audios, у который столбец type будет определять модель, а json-столбец (или text) под названием properties будет хранить их свойства, которыми они отличаются друг от друга. Вы можете указать Laravel проиндексировать этот столбец, для лучшей производительности при фильтрации, или сделать составной индекс

```php
Schema::create('audios', function (Blueprint $table) {
   
    $table->string(’type’);
    $table->json(’properties’);
});
```

после создаем три модели: Podcast, Song и Soundtrack, которые наследуют абстрактную модель Audio. магия будет в scopes котороя позволит отфильтровать запись по типу

```php
public function boot()
{
    parent::boot();
    static::addGlobalScope('podcast', function (Builder $builder) {
        $builder->where('type', 'podcast');
    });
}
```
---