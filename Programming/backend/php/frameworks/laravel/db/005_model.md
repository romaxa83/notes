#php #laravel 

#### üîπ –ö–æ–º–∞–Ω–¥–∞ —Å–æ–∑–¥–∞–Ω–∏—è

```bash
php artisan make:model Models/Product
```
---
#### üîπ –ü–ï–†–ï–û–ü–†–ï–î–ï–õ–ï–ù–ò–ï –ù–ê–ó–í–ê–ù–ò–ï –¢–ê–ë–õ–ò–¶–´

```php
protected $table = 'table_name'
```
---
#### üîπ –û–¢–ö–õ–Æ–ß–ï–ù–ò–ï TIMESTAMP

```php
public $timestamps = false;
```
---
#### üîπ FILLABLE

```php
// –ø–æ–ª—è –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –º–µ—Ç–æ–¥–æ–º create
protected $fillable = ['name','type', 'desc']
```
---
#### üîπ CATS

> –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ø–æ—Å–æ–± –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º —Ç–∏–ø–∞–º –¥–∞–Ω–Ω—ã—Ö.

```php
// —É–∫–∞–∑—ã–≤–∞–µ—Ç —á—Ç–æ –ø–æ–ª–µ variants –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –º–∞—Å—Å–∏–≤–æ–º
// (—Ö–æ—Ç—è –≤ –±–∞–∑–µ –æ–Ω–æ –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ –≤–∏–¥–µ json,
// laravel —Å–∞–º –µ–≥–æ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç)
protected $casts = [ 
	'variants' => 'array',
	'active' => 'boolean',               
];

// –º–æ–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è
protected $casts = [
    'published_at' => 'datetime:Y-m-d',
];
```
---
#### üîπ DATES

```php
// –≤–µ—Ä–Ω–µ—Ç –∫–∞–∫ –æ–±—å–µ–∫—Ç Carbone
protected $dates = [
    'closed_at',
];

// –º–æ–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è
protected $dates = [
    'date' => 'datetime:Y-m-d'
];
```
---
#### üîπ MUTATORS (–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º)

> –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `set` –∏ `attribute` –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã, –∞ –º–µ–∂–¥—É –Ω–∏–º–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ (–Ω—É–∂–Ω–æ–≥–æ) –ø–æ–ª—è –≤ –±–¥, –≤ `value` –ø—Ä–∏–π–¥–µ—Ç –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º

```php
// –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—å—Å—è —Å–µ—Ç—Ç–µ—Ä
public function setLastNameAttribute($value) 
{
    $this->attributes['last_name'] = ucfirst($value);
}
```
---
#### üîπ HIDDEN 

> –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã –Ω–µ –¥–æ–ª–∂–Ω—ã –≤–∫–ª—é—á–∞—Ç—å—Å—è –≤ –º–∞—Å—Å–∏–≤ –∏ JSON-–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä –ø–∞—Ä–æ–ª—å. –î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–≤–æ–π—Å—Ç–≤–æ `$hidden`. –°–≤–æ–π—Å—Ç–≤–æ `$hidden` –¥–µ–π—Å—Ç–≤—É–µ—Ç –∫–∞–∫ —á–µ—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫

```php
protected $hidden = [
    'password'
];
```
---
#### üîπ VISIBLE 

> –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ `$visible` –¥–ª—è –±–µ–ª–æ–≥–æ —Å–ø–∏—Å–∫–∞. –ö–æ–≥–¥–∞ –≤ –º–æ–¥–µ–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —Å–≤–æ–π—Å—Ç–≤–æ `$visible`, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã—Ç—ã. –≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫ –∂–µ, –∫–∞–∫ —Å–≤–æ–π—Å—Ç–≤–∞ `$fillable` –∏ `$guarded`.

```php
protected $visible = [
    'first_name',
    'last_name'
];
```
---
#### üîπ ACCESSORS (—á–∏—Ç–∞—Ç–µ–ª–∏)

> –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∏–ª–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—Ç—Ç—Ä–∏–±—É—Ç–∞

```php
public function getFullNameAttribute() 
{
    return "{$this->first_name} {$this->last_name}";
}

// –¥–æ—Å—Ç—É–ø —Ç–µ–ø–µ—Ä—å $user->full_name, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∞—Ç—Ä–∏–±—É—Ç full_name –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—å—Å—è –≤ dd(), –Ω–æ –º—ã –º–æ–∂–µ–º —Å–¥–µ–ª–∞—Ç—å –µ–≥–æ –æ–±—â–µ–¥–æ—Å—Ç—É–ø–Ω—ã–º –ø—Ä–∏ –ø–æ–º–æ—â–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π $appends

protected $appends = [
    'full_name',
];
```
---
#### üîπ APPENDS (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π)

> –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π (—Å–≤–æ–π—Å—Ç–≤–æ `$appends`). –ö–æ–≥–¥–∞ —É –º–æ–¥–µ–ª–∏ –µ—Å—Ç—å —á–∏—Ç–∞—Ç–µ–ª–∏ –∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è, —Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–Ω–∏ –Ω–µ –Ω–µ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –º–∞—Å—Å–∏–≤ –∏ JSON-–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏. –î–ª—è —ç—Ç–æ–≥–æ –≤—ã –¥–æ–ª–∂–Ω—ã –¥–æ–±–∞–≤–∏—Ç—å —á–∏—Ç–∞—Ç—å –∏–ª–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ –∞—Ç—Ä–∏–±—É—Ç—É `$appends`. 

==–ù–∞ –ø—Ä–∏–º–µ—Ä–µ —á–∏—Ç–∞—Ç–µ–ª—è getFullNameAttribute:==
```php
$appends = [
    'full_name'
];
```


> ‚ö†Ô∏è –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –ß–∏—Ç–∞—Ç–µ–ª—å, –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–π –∫ –∞—Ç—Ä–∏–±—É—Ç—É `$appends`, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∑–º–µ–∏–Ω–æ–º_—Ä–µ–≥–∏—Å—Ç—Ä–µ (`snake_case`), –¥–∞–∂–µ –µ—Å–ª–∏ –±—ã–ª –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –≤ –í–µ—Ä–±–ª—é–∂–µ–º–†–µ–≥–∏—Å—Ç—Ä–µ (`CamelCase`).

```php
// –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –º–æ–¥–µ–ª—å User –∏–º–µ–µ—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –æ–¥–∏–Ω-–∫–æ-–º–Ω–æ–≥–∏–º —Å –º–æ–¥–µ–ª—å—é Blog.
public function blogs() 
{
    return $this->hasMany(App\Blog::class);
}

// –ß—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –±–ª–æ–≥–∏ –∫ –º–æ–¥–µ–ª–∏, –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å –∏—Ö –≤ –∞—Ç—Ä–∏–±—É—Ç $appends:
$appends = [
    'full_name',
    'blogs'
];

// –¢–∞–∫–∂–µ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –∞—Ç—Ä–∏–±—É—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω—ã.
$appends = [
    'full_name',
    'blogs:id,title'
];
```
---
#### üîπ TOUCHES

–ö–æ–≥–¥–∞ –º–æ–¥–µ–ª—å –∏–º–µ–µ—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏–µ ¬´–ú–Ω–æ–≥–∏–µ –∫ –û–¥–Ω–æ–º—É¬ª –∏–ª–∏ ¬´–ú–Ω–æ–≥–∏–µ –∫–æ –ú–Ω–æ–≥–∏–º¬ª —Å –¥—Ä—É–≥–æ–π –º–æ–¥–µ–ª—å—é, –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ —ç—Ç–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π, –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—â–∏–π –±–ª–æ–≥—É, –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –º–µ—Ç–∫—É –≤—Ä–µ–º–µ–Ω–∏ —Ä–æ–¥–∏—Ç–µ–ª—è –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –¥–æ—á–µ—Ä–Ω–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞. –≠—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å, –¥–æ–±–∞–≤–∏–≤ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ –∞—Ç—Ä–∏–±—É—Ç—É `$touch`.

```php
class Comment extends Model
{
    protected $touches = ['blog'];

    public function blog()
    {
        return $this->belongsTo(App\Blog::class);
    }
}

// –¢–µ–ø–µ—Ä—å, –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –º–æ–¥–µ–ª–∏ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç—Å—è –∞—Ç—Ä–∏–±—É—Ç updated_at —É –±–ª–æ–≥–∞.
```
---
#### üîπ –ü–†–û–í–ï–†–ö–ê –ú–û–î–ï–õ–ï–ô –ù–ê –ò–î–ï–ù–¢–ò–ß–ù–û–°–¢–¨ 

==–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ—Ç–æ–¥ is()==
```php
$user = App\User::find(1);
$sameUser = App\User::find(1);
$diffUser = App\User::find(2);
$user->is($sameUser); // true
$user->is($diffUser); // false
```
---
#### üîπ –ü–ï–†–ï–ó–ê–ì–†–£–ó–ö–ê –ú–û–î–ï–õ–ò

> –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –º–æ–¥–µ–ª—å, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

```php
$user = App\User::first();
$user->name; // John

// –∑–∞–ø–∏—Å—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±—ã–ª–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –≤ –¥—Ä—É–≥–æ–º –ø–æ—Ç–æ–∫–µ. –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–ª–µ 'name' –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –Ω–∞ Peter.
$user->refresh();
$user->name; // Peter
```
---
#### üîπ –ó–ê–ì–†–£–ó–ö–ê –°–í–ï–ñ–ï–ô –ú–û–î–ï–õ–ò

> –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –º–æ–¥–µ–ª–∏ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `fresh()`. 
> ‚ö†Ô∏è –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: —ç—Ç–æ –Ω–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –º–æ–¥–µ–ª–∏, –∞ –∏–º–µ–Ω–Ω–æ –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞.

```php
$user = App\User::first();
$user->name; // John

// –∑–∞–ø–∏—Å—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±—ã–ª–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –≤ –¥—Ä—É–≥–æ–º –ø–æ—Ç–æ–∫–µ. –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–ª–µ 'name' –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –Ω–∞ Peter.
$updatedUser = $user->fresh();
$updatedUser->name; // Peter
$user->name; // John
```
---
#### üîπ DELETED_AT

> –°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π —Å—Ç–æ–ª–±–µ—Ü `deleted_at`. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `Laravel` –≤—ã–ø–æ–ª–Ω—è–µ—Ç ¬´–º—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ¬ª, –∏—Å–ø–æ–ª—å–∑—É—è —Å—Ç–æ–ª–±–µ—Ü delete_at. –í—ã –º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —ç—Ç–æ, —Å–æ–∑–¥–∞–≤ —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Å—Ç–æ–ª–±–µ—Ü –¥–ª—è —ç—Ç–∏—Ö —Ü–µ–ª–µ–π.

```php
class User extends Model
{
    use SoftDeletes;
    * –ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ç–æ–ª–±—Ü–∞ "deleted at"
    *
    * @var string
    */
    const DELETED_AT = 'is_deleted';
}

// –∏–ª–∏ –æ–ø—Ä–µ–¥–µ–ª–∏–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

class User extends Model
{
    use SoftDeletes;
    public function getDeletedAtColumn()
    {
        return 'is_deleted';
    }
}
```
---
#### üîπ –ü–û–õ–£–ß–ï–ù–ò–ï –ò–ó–ú–ï–ù–ï–ù–´–• –ê–¢–†–ò–ë–£–¢–û–í

> –ò—Å–ø–æ–ª—å–∑—É—è –º–µ—Ç–æ–¥ `getChanges()` –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã –º–æ–¥–µ–ª–∏.

```php
$user->getChanges();
// [
//   "name" => "Peter",
// ]
```
---
#### üîπ –ú–ï–ù–Ø–õ–ò–°–¨ –õ–ò –î–ê–ù–ù–´–ï –í –ú–û–î–ï–õ–ò

> –° –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ `isDirty()` –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∑–º–µ–Ω—è–ª–∞—Å—å –ª–∏ –º–æ–¥–µ–ª—å.

```php
$user = App\User::first();
$user->isDirty();          //false
$user->name = "Peter";
$user->isDirty();          //true

// –í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤:
$user->isDirty('name'); //true
$user->isDirty('age'); //false

// –±—ã–ª–∏ –ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è, –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤ –ø–æ–ª–µ, —á—Ç–æ —É–∑–Ω–∞—Ç—å –∏–∑–º–µ–Ω—è–ª–æ—Å—å –ª–∏ –æ–Ω–æ
$user->wasChanged()
```
---
#### üîπ –ü–û–õ–£–ß–ï–ù–ò–ï –ò–°–•–û–î–ù–´–• –ó–ù–ê–ß–ï–ù–ò–ô

> –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–ø–∏—Å–µ–π –≤ `Eloquent` –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –∏—Å—Ö–æ–¥–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–∞ –ø—Ä–∏ –ø–æ–º–æ—â–∏ –º–µ—Ç–æ–¥–∞ `getOriginal()`.

```php
$user = App\User::first();
$user->name;                  //John
$user->name = "Peter";        //Peter
$user->getOriginal('name');    //John
$user->getOriginal();          //–ò—Å—Ö–æ–¥–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ $user
```
---
#### üîπ –•–†–ê–ù–ï–ù–ò–ï –°–¢–ê–¢–ò–ß–ï–°–ö–ò–• –î–ê–ù–ù–´–•

> –•—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –º–æ–¥–µ–ª—å—é, –≤–Ω—É—Ç—Ä–∏ –º–æ–¥–µ–ª–∏

```php
class BettingOdds extends Model
{
   protected static $sports = [
      'soccer' => 'sport:1',
      'tennis' => 'sport:2',
      'basketball' => 'sport:3',
      ...
   ];
}

// –ü–æ–ª—É—á–∞—Ç—å –∏—Ö –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ BettingOdds::$sports['soccer'];

// —Ç–∞–∫–∂–µ –∏—Ö –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ scope (–≤ —Ç–æ–π –∂–µ –º–æ–¥–µ–ª–∏ –ø—Ä–æ–ø–∏—Å—ã–≤–∞–µ–º)
public function scopeSport($query, string $sport)
{
    if (!isset(self::$sports[$sport])) {
        return $query;
    }
      
    return $query->where('sport_id', self::$sports[$sport]);
}

// –∏ –ø–æ–ª—É—á–∞–µ–º —á–µ—Ä–µ–∑ scope BettingOdds::sport('soccer')->get();
```
---
#### üîπ SCOPE

> c–∫–æ—É–ø—ã (local scopes) –ø–æ–∑–≤–æ–ª—è—Ç –Ω–∞–º —Å–æ–∑–¥–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã Query Builder, –∫–æ—Ç–æ—Ä—ã–µ –º—ã —Å–º–æ–∂–µ–º –ø—Ä–∏–º–µ–Ω–∏—Ç—å —Ü–µ–ø–æ—á–∫–æ–π –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤–º–µ—Å—Ç–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ 
  `->where()` –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ –ø–æ–Ω—è—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã `->delivered() –∏ ->paid()`.   –ü—Ä–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–∏ —Å–∫–æ—É–ø–æ–≤ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ—á–Ω–æ–µ –∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ `scope[Something]`.  –¢–æ–≥–¥–∞ `Laravel` –±—É–¥–µ—Ç –∑–Ω–∞—Ç—å, —á—Ç–æ —ç—Ç–æ —Å–∫–æ—É–ø, –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–≥–æ –≤ `Query Builder`. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∫–ª—é—á—ë–Ω –ø–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–Ω–µ–¥—Ä—è–µ—Ç `Laravel` –∏ –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–º –ø–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤.

```php
class Order extends Model
{
   public function scopeDelivered($query) 
   {
      return $query->where('status', 'delivered');
   }

   public function scopePaid($query) 
   {
      return $query->where('paid', true);
   }
}

$orders = Order::delivered()->paid()->get();
```

==–ø–µ—Ä–µ–¥–∞—á–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ scope==
```php
class Order extends Model
{
   public function scopeStatus($query, string $status) {
      return $query->where('status', $status);
   }
}
$orders = Order::status('delivered')->paid()->get();
```

> `Laravel` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `where[Something]` –¥–ª—è –∑–∞–º–µ–Ω—ã –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Å–∫–æ—É–ø–∞. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –≤—ã –º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å:

```php
Order::whereStatus('delivered')->paid()->get();
```

> `Laravel` –±—É–¥–µ—Ç –∏—Å–∫–∞—Ç—å –ø–æ–ª–µ `¬´Something¬ª` (–∏–∑ `where[Something]`) –≤ –∑–º–µ–∏–Ω–æ–º_—Ä–µ–≥–∏—Å—Ç—Ä–µ. –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –ø–æ–ª–µ status –≤ –≤–∞—à–µ–π –ë–î, —Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–π –ø—Ä–∏–º–µ—Ä. –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å `shipping_status`, —Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

```php
Order::whereShippingStatus('delivered')->paid()->get();
```

==–ü–æ–¥–∑–∞–ø—Ä–æ—Å—ã Laravel –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ Scope==
```php
// –≤ –º–æ–¥–µ–ª—å User –¥–æ–±–æ–≤–ª—è–µ–º
function scopeWithLastCommentDate($query)
{
    $query->addSubSelect('last_comment_at', Comment::select('created_at')
        ->whereColumn('user_id', 'users.id')
        ->latest()
    );
}

$users = User::withLastCommentDate()->get();
```

==–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–∫–æ—É–ø—ã==
```php
// –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø–æ —É–±—ã–≤–∞–Ω–∏—é –ø–æ–ª—è created_at
User::latest()->get();

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø–æ –ª—é–±–æ–º—É –ø–æ–ª—é –ø–æ —É–±—ã–≤–∞–Ω–∏—é
User::latest('last_login_at')->get();

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ —Å–ª—É—á–∞–π–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
User::inRandomOrder()->get();
```

- https://laravel.com/docs/8.x/eloquent#query-scopes
---
#### üîπ –î–û–ü. –ú–ï–¢–û–î–´ –ò –°–í–û–ô–°–¢–í–ê –£ –ú–û–î–ï–õ–ò

```php
// —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é –∫–æ–ø–∏—é –º–æ–¥–µ–ª–∏
$user = App\User::find(1);
$newUser = $user->replicate();
$newUser->save();

// —ç—Ç–æ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–ª–µ "id"
protected $primaryKey = 'uuid';

// –∏ –æ–Ω–æ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∞–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–Ω—ã–º
public $incrementing = false;

// –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Å—á–µ—Ç—á–∏–∫ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –≤ –º–æ–¥–µ–ª–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 15)
protected $perPage = 25; 
```
---
#### üîπ BOOT

> —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ `boot()` –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ–ª–µ–π –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏

```php
// –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ uuid, –≤ –º–æ–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω–∏–µ
public static function boot()
{
    parent::boot();
    self::creating(function ($model) {
      $model->uuid = (string)Uuid::generate();
    });
}

```
---
#### üîπ SAVE

> –º–æ–∂–µ–º –∑–∞—Å—Ç–∞–≤–∏—Ç—å –µ–≥–æ ¬´–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å¬ª –¥–µ—Ñ–æ–ª—Ç–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ–ª—è `updated_at` —Ç–µ–∫—É—â–µ–π –æ—Ç–º–µ—Ç–∫–æ–π –≤—Ä–µ–º–µ–Ω–∏

```php
$product = Product::find($id);
$product->updated_at = '2019-01-01 10:00:00';
$product->save(['timestamps' => false]);
```
---
#### üîπ EVENT

> `Eloquent` –∏–º–µ–µ—Ç —Ç–∞–∫ –Ω–∞–∑—ã–≤–∞–µ–º—É—é –°–æ–±—ã—Ç–∏–π–Ω–∞—è –º–æ–¥–µ–ª—å (`Model Events`). –í –æ–±—â–µ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –æ–Ω –∑–∞–ø—É—Å–∫–∞–µ—Ç 11 —Å–æ–±—ã—Ç–∏–π –≤ —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö –∫ –∫–æ—Ç–æ—Ä—ã–º –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ boot –≤ –º–æ–¥–µ–ª–∏ –∏–ª–∏ —á–µ—Ä–µ–∑ `observer`, –∏ –ø—Ä–∏–º–∏–Ω–∏—Ç—å –∫ –Ω–∏–º –∫–∞–∫—É–µ-—Ç–æ –ª–æ–≥–∏–∫—É

- https://laravel.com/docs/8.x/eloquent#events
---
