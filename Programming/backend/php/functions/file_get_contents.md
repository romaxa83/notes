#php #function

Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ Ð²ÑÑ‚Ñ€Ð¾ÐµÐ½Ð½Ð¾Ð¹ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸Â **`file_get_contents`**Â Ð¼Ð¾Ð¶Ð½Ð¾ ÑÑ‡Ð¸Ñ‚Ñ‹Ð²Ð°Ñ‚ÑŒ ÐºÐ°Ðº Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹ Ñ‚Ð°Ðº Ð¸ Ð½Ð° ÑƒÐ´Ð°Ð»ÐµÐ½Ð½Ð¾Ð¼ ÑÐµÑ€Ð²ÐµÑ€Ðµ (Ð¿Ð°Ñ€ÑÐ¸Ð½Ð³ ÑÐ°Ð¹Ñ‚Ð¾Ð²) ÑƒÑÐ¿ÐµÑˆÐ½Ð¾, ÐºÐ°Ðº Ð¸ Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ [[curl#ðŸ”¹ PHP cURL Ð¾ÑÐ½Ð¾Ð²Ñ‹|curl]].  

Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð¿Ñ€Ð¸Ð½Ð¸Ð¼Ð°ÐµÑ‚ 5 Ð°Ñ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð²:  
`file_get_contents(file, include_path, context, offset, maxlen)` 

ðŸ”¸Ð¿Ñ€Ð¸Ð¼ÐµÑ€ Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ð³Ð¾ GET-Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°
```php
$url = 'http://site.com/page.html';
$content = file_get_contents($url);
```


ÐŸÑ€ÐµÐ¸Ð¼ÑƒÑ‰ÐµÑÑ‚Ð²Ð°:
- Ð²ÑÑ‚Ñ€Ð¾ÐµÐ½Ð½Ð°Ñ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ, Ð½Ðµ Ñ‚Ñ€ÐµÐ±ÑƒÑŽÑ‰Ð°Ñ Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ð¿Ð°ÐºÐµÑ‚Ð¾Ð² Ð´Ð»Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹
- Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ñ‚Ð° Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ

ÐÐµÐ´Ð¾ÑÑ‚Ð°Ñ‚ÐºÐ¸:
- allow_url_fopen Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ Ð²ÐºÐ»ÑŽÑ‡Ñ‘Ð½ Ð½Ð° Ñ…Ð¾ÑÑ‚Ð¸Ð½Ð³Ðµ (Ð½Ð° shared-Ñ…Ð¾ÑÑ‚Ð¸Ð½Ð³Ð°Ñ…, Ñ‡Ð°ÑÑ‚Ð¾ ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð¾Ñ‚ÐºÐ»ÑŽÑ‡Ñ‘Ð½Ð½Ñ‹Ð¼)
- Ð¼ÐµÐ½ÑŒÑˆÐ°Ñ Ð³Ð¸Ð±ÐºÐ¾ÑÑ‚ÑŒ (Ð² Ð¾Ñ‚Ð»Ð¸Ñ‡Ð¸Ð¸ Ð¾Ñ‚ curl)
- Ð½ÐµÐ²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚Ñ‹ Ð² Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ð¿Ð¾Ñ‚Ð¾ÐºÐ¾Ð²

---
##### ðŸ”¹ ÐŸÐ¾Ð´Ð¼ÐµÐ½Ð° ÐºÐ¾Ð½Ñ‚ÐµÐºÑÑ‚Ð°

Â ÐºÐ¾Ð³Ð´Ð° Ð½ÑƒÐ¶Ð½Ð¾ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ POST-Ð·Ð°Ð¿Ñ€Ð¾Ñ, cookie, Ð¸Ð»Ð¸ Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ Ñ‡ÐµÑ€ÐµÐ· Ð¿Ñ€Ð¾ÐºÑÐ¸, Ð° Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´ Ð½Ð° curl Ð² Ñ€Ð°Ð¼ÐºÐ°Ñ… Ð´Ð°Ð½Ð½Ð¾Ð¹ ÑÐ¸ÑÑ‚ÐµÐ¼Ðµ Ð½ÐµÐ²Ð¾Ð·Ð¼Ð¾Ð¶ÐµÐ½, Ð¸Ð»Ð¸ Ð½ÐµÑ€Ð°Ñ†Ð¸Ð¾Ð½Ð°Ð»ÐµÐ½. Ð’ ÑÑ‚Ð¾Ð¼ ÑÐ»ÑƒÑ‡Ð°Ðµ ÐµÐ´Ð¸Ð½ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ð¼ Ñ€ÐµÑˆÐµÐ½Ð¸ÐµÐ¼ ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð½Ñ‚ÐµÐºÑÑ‚Ð° Ð¿Ð¾Ñ‚Ð¾ÐºÐ° Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸.
Â *ÐšÐ¾Ð½Ñ‚ÐµÐºÑÑ‚ Ð¿Ð¾Ñ‚Ð¾ÐºÐ°* - ÑÑ‚Ð¾ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð²ÐµÐ´ÐµÐ½Ð¸Ñ Ð¿Ñ€Ð¸ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ñ…, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð¼ÐµÐ½ÑÐµÑ‚ÑÑ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÐµÐ¹Â `stream_context_create`. ÐœÐ¾Ð¶Ð½Ð¾ ÑƒÐºÐ°Ð·Ð°Ñ‚ÑŒ Ñ‚Ð¸Ð¿ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° (GET, POST, PUT, Ð¸ Ð»ÑŽÐ±Ð¾Ð¹ Ð´Ñ€ÑƒÐ³Ð¾Ð¹ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÐ¼Ñ‹Ð¹ http-Ð¼ÐµÑ‚Ð¾Ð´), Ð¿Ñ€Ð¾ÐºÑÐ¸, Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐ¸, Ð¸ Ñ‚.Ð´. Ð’ÑÐµ Ð¾Ð¿Ñ†Ð¸Ð¸ Ð¼Ð¾Ð¶Ð½Ð¾ Ð¿Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ Ð¿Ð¾Â [ÑÑÑ‹Ð»ÐºÐµ](http://php.net/manual/ru/context.http.php?ref=badtry.net) . ÐŸÐ¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ñ‹Ð¹ ÐºÐ¾Ð½Ñ‚ÐµÐºÑÑ‚.

```php
//Ð¿Ð¾ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð°Ð¼ http-Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð², Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐ¸ Ð¾Ñ‚Ð´ÐµÐ»ÑÑŽÑ‚ÑÑ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð¼ Ð¿ÐµÑ€ÐµÐ½Ð¾ÑÐ° ÑÑ‚Ñ€Ð¾ÐºÐ¸ (\r\n), 
//Ð° Ð¸Ð¼ÐµÐ½Ð° Ð¸ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐ¾Ð² Ð¾Ñ‚Ð´ÐµÐ»ÑÑŽÑ‚ÑÑ Ð´Ð²Ð¾ÐµÑ‚Ð¾Ñ‡Ð¸ÐµÐ¼
$headers = [
    'Content-type: application/x-www-form-urlencoded', //Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº
    'Cookie: foo=bar;two=12' //ÐºÑƒÐºÐ¸, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ñ‚Ð°Ðº Ð¶Ðµ Ð¿ÐµÑ€ÐµÐ´Ð°ÑŽÑ‚ÑÑ Ð² Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐµ
];

$context = stream_context_create([
    'http' => [
        'method'    => 'POST',
        'content'   => 'key=value&key2=value2', //Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ Ð·Ð°Ð¿Ð¸ÑÐ¸ post-Ð´Ð°Ð½Ð½Ñ‹Ñ…
        'header'    =>  implode("\r\n", $headers), //Ð´Ð»Ñ ÑƒÐ´Ð¾Ð±ÑÑ‚Ð²Ð° Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐ¸ Ð²Ñ‹Ð½ÐµÑÐ»Ð¸ Ð² Ð¼Ð°ÑÑÐ¸Ð², Ð¸ Ð¾Ð±ÑŠÐµÐ´Ð¸Ð½Ð¸Ð»Ð¸ Ð¸Ñ… Ñ„ÑƒÐ½ÐºÑ†Ð¸ÐµÐ¹ implode
        'user_agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.181 Safari/537.36',
    ]
]);

$result = file_get_contents($url, false, $context);
```
