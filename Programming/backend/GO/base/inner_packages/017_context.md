#go #package 

#### üîπ –ü–∞–∫–µ—Ç context

–ì–ª–∞–≤–Ω–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–∞ `context` –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ `Context` –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–Ω–Ω—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è, –±—ã–≤–∞—é—Ç —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ –ø–æ –∫–∞–∫–æ–π-–ª–∏–±–æ –ø—Ä–∏—á–∏–Ω–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç —Ç–æ–≥–æ, —á—Ç–æ –≤—ã –¥–µ–ª–∞–µ—Ç–µ. –û–¥–Ω–∞–∫–æ –æ—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ, –∫–æ–≥–¥–∞ –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∞—à–∏—Ö —Ä–µ—à–µ–Ω–∏—è—Ö –æ–± –∞–Ω–Ω—É–ª–∏—Ä–æ–≤–∞–Ω–∏–∏. –ò–º–µ–Ω–Ω–æ —ç—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–¥–µ–ª–∞—Ç—å –ø–∞–∫–µ—Ç `context`.

–î–∞–Ω–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–º —É–ø—Ä–∞–≤–ª—è—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ –≥–æ—Ä—É—Ç–∏–Ω–∞–º–∏ –Ω–∞—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞, –Ω–æ –∑–∞–ø—Ä–æ—Å–∞–º–∏ –º–µ–∂–¥—É —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏. –ß–∞—Å—Ç–æ –±—ã–≤–∞–µ—Ç —Ç–∞–∫, —á—Ç–æ –∫–ª–∏–µ–Ω—Ç, –∫–æ–≥–¥–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä, —Å–µ—Ä–≤–µ—Ä –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–∞–∫—É—é-—Ç–æ –±–æ–ª—å—à—É—é —Ä–∞–±–æ—Ç—É, —á—Ç–æ–±—ã –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ —ç—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å. –ù–æ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–π —Ä–∞–±–æ—Ç—ã, –∫–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –æ—Ç–º–µ–Ω–∏—Ç—å —Å–≤–æ–π –∑–∞–ø—Ä–æ—Å. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –∫–ª–∏–µ–Ω—Ç –æ—Ç–º–µ–Ω—è–µ—Ç, –∞ —Å–µ—Ä–≤–µ—Ä –Ω–∏—á–µ–≥–æ –Ω–µ –∑–Ω–∞–µ—Ç –æ–± —ç—Ç–æ–º –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å —Å–≤–æ–π –∑–∞–ø—Ä–æ—Å. –ú–µ—Ö–∞–Ω–∏–∑–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–º–µ–Ω–∏—Ç—å context —Ç–∞–∫ –∂–µ –∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ —Å–∏–≥–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ–± —ç—Ç–æ–º –≤ —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–ø–æ–ª–Ω—è–µ–º –±–æ–ª—å—à–æ–π –∑–∞–ø—Ä–æ—Å. –≠—Ç–æ –æ—á–µ–Ω—å –∞–∫—Ç—É–∞–ª—å–Ω–æ –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º, –∫–æ–≥–¥–∞ —É –Ω–∞—Å —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∏ –æ–±—â–∞—Ç—å—Å—è —Ä–∞–∑–Ω—ã–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –∑–∞–ø—Ä–æ—Å–∞ –∏ –æ—Ç–≤–µ—Ç–∞. –î–∞–Ω–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—ç–∫–æ–Ω–æ–º–∏—Ç—å –º–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–æ–≤, –Ω–µ –ø–µ—Ä–µ—Ä–∞–±–∞—Ç—ã–≤–∞—è –ª–∏—à–Ω–∏–µ –∑–∞–ø—Ä–æ—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –∫–ª–∏–µ–Ω—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä, —É–∂–µ –æ—Ç–º–µ–Ω–∏–ª. –ü–æ—ç—Ç–æ–º—É –≤ go —Ö–æ—Ä–æ—à–µ–π –ø—Ä–∞–∫—Ç–∏–∫–æ–π —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø—Ä–æ–∫–∏–¥—ã–≤–∞—Ç—å context –≤–æ –≤—Å–µ —É—Ä–æ–≤–Ω–∏ –Ω–∞—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞.

–¢–∏–ø `Context` ‚Äî —ç—Ç–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –∏–º–µ—é—â–∏–π —á–µ—Ç—ã—Ä–µ –º–µ—Ç–æ–¥–∞: `Deadline()`, `Done()`, `Err()` –∏ `Value()`.–ö —Å—á–∞—Å—Ç—å—é, –º—ã –Ω–µ –æ–±—è–∑–∞–Ω—ã —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ `Context` ‚Äî–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏—à—å –∏–∑–º–µ–Ω–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `Context`, –∏—Å–ø–æ–ª—å–∑—É—è —Ç–∞–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–∞–∫ context.`WithCancel()`, `context.WithDeadline()` –∏  `context.WithTimeout()`. –≠—Ç–∏ —Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–π (–¥–æ—á–µ—Ä–Ω–∏–π) –æ–±—ä–µ–∫—Ç `Context` –∏ —Ñ—É–Ω–∫—Ü–∏—é `CancelFunc`. –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ `CancelFunc` —É–¥–∞–ª—è–µ—Ç —Å—Å—ã–ª–∫—É —Ä–æ–¥–∏—Ç–µ–ª—è –Ω–∞ –¥–æ—á–µ—Ä–Ω–∏–π –æ–±—ä–µ–∫—Ç –∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –Ω–∏–º —Ç–∞–π–º–µ—Ä—ã. –°–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Å–±–æ—Ä—â–∏–∫ –º—É—Å–æ—Ä–∞ `Go` –º–æ–∂–µ—Ç —Å–≤–æ–±–æ–¥–Ω–æ —Å–æ–±—Ä–∞—Ç—å –¥–æ—á–µ—Ä–Ω–∏–µ –≥–æ—Ä—É—Ç–∏–Ω—ã, —É –∫–æ—Ç–æ—Ä—ã—Ö –±–æ–ª—å—à–µ –Ω–µ—Ç —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –Ω–∏–º–∏ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏—Ö –≥–æ—Ä—É—Ç–∏–Ω. –ß—Ç–æ–±—ã —Å–±–æ—Ä–∫–∞ –º—É—Å–æ—Ä–∞ —Ä–∞–±–æ—Ç–∞–ª–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞ –¥–æ–ª–∂–Ω–∞ —Ö—Ä–∞–Ω–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –≤—Å–µ –¥–æ—á–µ—Ä–Ω–∏–µ –≥–æ—Ä—É—Ç–∏–Ω—ã. –ï—Å–ª–∏ –¥–æ—á–µ—Ä–Ω—è—è –≥–æ—Ä—É—Ç–∏–Ω–∞ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è –±–µ–∑ –≤–µ–¥–æ–º–∞ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π, –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —É—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞ —Ç–∞–∫–∂–µ –Ω–µ –±—É–¥–µ—Ç –∞–Ω–Ω—É–ª–∏—Ä–æ–≤–∞–Ω–∞.

==–ü–†–ò–ú–ï–†==
```go
package main
import (
	"context"
	"fmt"
	"os"
	"strconv"
	"time"
)

// –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤—Å–µ–≥–æ –æ–¥–∏–Ω –∞—Ä–≥—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π 
// —è–≤–ª—è–µ—Ç—Å—è –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
func f1(t int) {
	c1 := context.Background()
	c1, cancel := context.WithCancel(c1)
	defer cancel()
	go func() {
		time.Sleep(4 * time.Second)
		cancel()
	}()
	select {
	// –º—ã –≤–∏–¥–∏–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ Done() –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π 
	// —Ç–∏–ø–∞ Context. –ü—Ä–∏ –≤—ã–∑–æ–≤–µ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–Ω–Ω—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
	// –í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ Context.Done() —è–≤–ª—è–µ—Ç—Å—è –∫–∞–Ω–∞–ª–æ–º,
	// –ø–æ—Ç–æ–º—É —á—Ç–æ –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ –º—ã –Ω–µ —Å–º–æ–≥–ª–∏ –±—ã
	// –ø—Ä–∏–º–µ–Ω–∏—Ç—å –µ–≥–æ –≤ –æ–ø–µ—Ä–∞—Ç–æ—Ä–µ select.
	case <-c1.Done():
		fmt.Println("f1():", c1.Err())
		return
	case r := <-time.After(time.Duration(t) * time.Second):
		fmt.Println("f1():", r)
	}
	return
}

// –í —ç—Ç–æ–º —Ñ—Ä–∞–≥–º–µ–Ω—Ç–µ –ø–æ–∫–∞–∑–∞–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ context.WithTimeout(),
// –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–≤–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–∞: –æ–¥–∏–Ω —Ç–∏–ø–∞ Context, –∞ –≤—Ç–æ—Ä–æ–π 
// —Ç–∏–ø–∞ time.Duration. –ü–æ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ –æ–∂–∏–¥–∞–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
// –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è cancel().
func f2(t int) {
	c2 := context.Background()
	c2, cancel := context.WithTimeout(c2, time.Duration(t)*time.Second)
	defer cancel()
	go func() {
		time.Sleep(4 * time.Second)
		cancel()
	}()

	select {
	case <-c2.Done():
		fmt.Println("f2():", c2.Err())
		return
	case r := <-time.After(time.Duration(t) * time.Second):
		fmt.Println("f2():", r)
	}
	return
}

// –∑–¥–µ—Å—å –ø–æ–∫–∞–∑–∞–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ context.WithDeadline(),
// –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–≤–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–∞: Context –∏ –≤—Ä–µ–º—è –≤ 
// –±—É–¥—É—â–µ–º, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –∫—Ä–∞–π–Ω–µ–º—É —Å—Ä–æ–∫—É –æ–∫–æ–Ω—á–∞–Ω–∏—è 
// –æ–ø–µ—Ä–∞—Ü–∏–∏. –ü–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —ç—Ç–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
// –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è cancel()
func f3(t int) {
	c3 := context.Background()
	deadline := time.Now().Add(time.Duration(2*t) * time.Second)
	c3, cancel := context.WithDeadline(c3, deadline)
	defer cancel()
	go func() {
		time.Sleep(4 * time.Second)
		cancel()
	}()

	select {
	case <-c3.Done():
		fmt.Println("f3():", c3.Err())
		return
	case r := <-time.After(time.Duration(t) * time.Second):
		fmt.Println("f3():", r)
	}
	return
}

func main(){
	if len(os.Args) != 2 {
		fmt.Println("Need a delay!")
		return
	}

	delay, err := strconv.Atoi(os.Args[1])
	if err != nil {
		fmt.Println(err)
		return
	}
	fmt.Println("Delay:", delay)
	f1(delay)
	f2(delay)
	f3(delay)
}
```
---
#### üîπ CONTEXT –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ —Å –≥–æ—Ä—É—Ç–∏–Ω–∞–º–∏

–ü–∞–∫–µ—Ç `context` –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–º –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≥–æ—Ä—É—Ç–∏–Ω. –ú—ã –º–æ–∂–µ–º –∑–∞–¥–∞–≤–∞—Ç—å –∏–º —Ç–∞–π–º–∞—É—Ç—ã, –¥–µ–¥–ª–∞–π–Ω—ã, –ø–æ—Å—ã–ª–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã –∏ –æ—Ç–º–µ–Ω—è—Ç—å –∫–∞–∫–∏–µ-—Ç–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏. –≠—Ç–æ –∫–∞—Å–∞–µ—Ç—Å—è, –∏ –≥–æ—Ä—É—Ç–∏–Ω, –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–∏ –º–µ–∂–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏.

```go
// –º–µ—Ç–æ–¥ Background –ø–∞–∫–µ—Ç–∞ context —Å–æ–∑–¥–∞–µ—Ç –Ω–∞—á–∞–ª—å–Ω–æ–µ, –¥–µ—Ñ–æ–ª—Ç–Ω–æ–µ 
// –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –æ—Ç —ç—Ç–æ–≥–æ context.Background 
// –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ
ctx := context.Background()
```

==–ü–†–ò–ú–ï–† (–≤ –ø—Ä–∏–º–µ—Ä–µ –º—ã –æ—Ç–º–µ–Ω—è–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤ —Ä—É—á–Ω—É—é)==
```go
// –Ω–µ–∫–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –¥–æ–ª–∂–Ω–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∫–∞–∫–∏–µ-—Ç–æ –¥–∞–Ω–Ω—ã–µ,
// –µ—Å–ª–∏ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è —Ç–∞–π–º–µ—Ä, —Ç–æ –º—ã —Å—á–∏—Ç–∞–µ–º, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ
// —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏–ª–∏—Å—å
// –µ—Å–ª–∏ –º—ã –∑–∞–≤–µ—Ä—à–∞–µ–º –Ω–∞—à context –∏ –≤ —Ñ—É–Ω–∫—Ü–∏—é Done —É –Ω–∞—Å –ø—Ä–∏—Ö–æ–¥–∏—Ç –∫–∞–Ω–∞–ª,
// –∫–æ—Ç–æ—Ä—ã–π —Å–∏–≥–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –æ —Ç–æ–º, —á—Ç–æ context –∑–∞–≤–µ—Ä—à–∏–ª—Å—è
func sendData(ctx context.Context, num int) {
	timer := time.NewTimer(time.Duration(num) * time.Second)

	select {
	case <-ctx.Done():
		fmt.Printf("–ü—Ä–æ—Ü–µ—Å—Å #%v –æ—Ç–º–µ–Ω–µ–Ω \n", num)
		return
	case <-timer.C:
		fmt.Printf("–î–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ #%v —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω \n", num)
	}
}

func main() {
	// —Å–æ–∑–¥–∞–µ–º context —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ WithCancel, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤
	// —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π context, –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ—Ç–æ—Ä–æ–≥–æ —Å–æ–∑–¥–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π context,
	// –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –æ—Ç–º–µ–Ω–∏—Ç—å, –º–µ—Ç–æ–¥ WithCancel –æ—Ç–¥–∞–µ—Ç –¥–≤–∞ –∑–Ω–∞—á–µ–Ω–∏—è
	// 1 - —Å–∞–º –∫–æ–Ω—Ç–µ–∫—Å—Ç, 2 - —Ñ—É–Ω–∫—Ü–∏—è CancelFunc, —Ç–æ –µ—Å—Ç—å —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–º–µ–Ω—ã
	// –Ω–∞—à–µ–≥–æ context
	ctx, cancel := context.WithCancel(context.Background())

	for i := 0; i <= 10; i++ {
		go sendData(ctx, i)
	}
	time.Sleep(time.Second)
	// –∑–¥–µ—Å—å –º—ã –æ—Ç–º–µ–Ω—è–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç
	cancel()
	time.Sleep(500 * time.Millisecond)
}
```

==–ü–†–ò–ú–ï–† (–∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π –ø—Ä–∏–º–µ—Ä—É –≤—ã—à–µ, –Ω–æ –¥–ª—è –æ—Ç–º–µ–Ω—ã –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–∞–π–º –∞—É—Ç, –≤ —Ç—Ä–∏ —Å–µ–∫—É–Ω–¥—ã) –∏—Å–ø–æ–ª—å–∑—É–µ–º WithTimeout - –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ –ø–µ—Ä–≤—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º –±–∞–∑–æ–≤—ã–π –∫–æ–Ω—Ç–µ–∫—Å, –≤—Ç–æ—Ä—ã–º –≤—Ä–µ–º—è - —á–µ—Ä–µ–∑ —Å–∫–æ–ª—å–∫–æ –∫–æ–Ω—Ç–µ–∫—Å –æ—Ç–º–µ–Ω–∏—Ç—å—Å—è.==
```go
func main() {
	parent := context.Background()
	ctx, _ := context.WithTimeout(parent, 3*time.Second)

	for i := 0; i <= 10; i++ {
		go sendData(ctx, i)
	}
	time.Sleep(4 * time.Second)
}
```

–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `WithDeadline`, —á—Ç–æ–± –æ—Ç–º–µ–Ω–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –≤—Ä–µ–º—è - –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ–º –ø–µ—Ä–≤—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º –±–∞–∑–æ–≤—ã–π –∫–æ–Ω—Ç–µ–∫—Å, –≤—Ç–æ—Ä—ã–º –≤—Ä–µ–º—è –≤ –∫–æ—Ç–æ—Ä–æ–µ
–ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –æ—Ç–º–µ–Ω–∞.

---
#### üîπ –ü–†–ò–ú–ï–†

–í –¥–∞–Ω–Ω–æ–º —Å–∫—Ä–∏–ø—Ç–µ –º—ã —Å–æ–∑–¥–∞–¥–∏–º –∫–æ–Ω—Ç–µ–∫—Å—Ç, –≤ –∫–æ—Ç–æ—Ä–æ–º  –≤–º–µ—Å—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏ `context.Background()` –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è `context.TODO()`. –û–±–µ —ç—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –Ω–µ–Ω—É–ª–µ–≤–æ–π –ø—É—Å—Ç–æ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç, –æ–¥–Ω–∞–∫–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —É –Ω–∏—Ö —Ä–∞–∑–Ω–æ–µ. –ú—ã —Ç–∞–∫–∂–µ –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ `context.WithValue()`.

```go
package main
import (
	"context"
	"fmt"
)

type aKey string

// —Ñ—É–Ω–∫—Ü–∏—è –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏
// –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Ç–∞–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
func searchKey(ctx context.Context, k aKey) {
	v := ctx.Value(k)
	if v != nil {
		fmt.Println("found value:", v)
		return
	} else {
		fmt.Println("key not found:", k)
	}
}

// –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã –Ω–µ –¥–æ–ª–∂–Ω—ã
// —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ö ‚Äî –∏—Ö —Å–ª–µ–¥—É–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å
// –≤ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –≤–∏–¥–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤.
// –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤ –∫–∞—á–µ—Å—Ç–≤–µ
// –ø–µ—Ä–≤–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–∏

func main() {
	myKey := aKey("mySecretValue")
	// –§—É–Ω–∫—Ü–∏—è context.WithValue() –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ø–æ—Å–æ–±
	// —Å–≤—è–∑—ã–≤–∞–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è —Å –æ–±—ä–µ–∫—Ç–æ–º Context
	ctx := context.WithValue(context.Background(), myKey, "mySecretValue")
	searchKey(ctx, myKey)
	searchKey(ctx, aKey("notThere"))
	emptyCtx := context.TODO()
	searchKey(emptyCtx, aKey("notThere"))
}
```

> ‚ö†Ô∏è –ó–∞–ø–æ–º–Ω–∏—Ç–µ: –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ –Ω—É–ª–µ–≤–æ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `context.TODO()` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞. –ò —É—á—Ç–∏—Ç–µ, —á—Ç–æ context.`TODO()` —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –µ—Å–ª–∏ –≤—ã –Ω–µ —É–≤–µ—Ä–µ–Ω—ã –≤ —Ç–æ–º, –∫–∞–∫–æ–π –æ–±—ä–µ–∫—Ç `Context` —Ö–æ—Ç–∏—Ç–µ –ø—Ä–∏–º–µ–Ω–∏—Ç—å.

---