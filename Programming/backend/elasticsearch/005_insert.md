
–°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–¥–∞–Ω–Ω—ã–µ) –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –º–µ—Ç–æ–¥–æ–º post(–∏–ª–∏ put) + –∏–º—è + json —Å –¥–∞–Ω–Ω—ã–º–∏
–µ—Å–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–µ—Ç—Å—è –º–µ—Ç–æ–¥–æ–º `PUT`, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∑–∞—Ç—å `id` (–≤ –º–µ—Ç–æ–¥–µ `post` —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å–∞–º)

```
POST /product/default
{
	"name":"ELK",
	"user": {
		"name":"Roman"
	}
}
```

==–≥–¥–µ==:
- product - –∏–Ω–¥–µ–∫—Å (–∞–Ω–∞–ª–æ–≥ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö)
- default - —Ç–∏–ø (–∞–Ω–∞–ª–æ–≥ —Ç–∞–±–ª–∏—Ü–µ –¥–∞–Ω–Ω—ã—Ö)
–∫–∞–∂–¥—ã–π —Ç–∏–ø –∏–º–µ–µ—Ç —Å–≤–æ—é —Å—Ö–µ–º—É (`mapping`), –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞ `id` –¥–æ–∫—É–º–µ–Ω—Ç–∞ –æ–Ω —Å–≥–µ–Ω–µ—Ä–∏—Ä—É—Ç —Å–∞–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–ª–∏ –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–≤–æ–π.

```
POST /product/default/1 - —Å–æ–∑–¥–∞—Å—Ç –¥–æ–∫—É–º–µ—Ç —Å id=1
```


–ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ —Å–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç, –Ω–µ –æ–±–Ω–æ–≤–ª—è—Ç—å(—Ç–∞–∫ –∫–∞–∫ –µ—Å–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç —Å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º id –æ–Ω –µ–≥–æ –∑–∞–º–µ–Ω–∏—Ç, —Ç.–µ. –æ–±–Ω–æ–≤–∏—Ç)
```
PUT /product/default/1?op_type=create 
```
–µ—Å–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç —Å —Ç–∞–∫–∏–º –∂–µ id —É–∂–µ —Å—É—â. –æ–ø–µ—Ä–∞—Ü–∏—è –æ—Ç–∫–ª–∞–Ω—è–µ—Ç—Å—è –≤–æ–∑–≤—Ä–∞—â–∞—è  –≤ –æ—Ç–≤–µ—Ç –æ—à–∏–±–∫—É(`409 Conflict`)

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ—Ç–≤–µ—Ç —Å –¥–∞–Ω–Ω—ã–º–∏ –æ–± –æ–ø–µ—Ä–∞—Ü–∏–∏
–≤ —Å–µ–∫—Ü–∏–∏ `_shards –ø–æ–ª—è`:
-  `total` - –∫–æ–ª-–≤–æ —à–∞—Ä–¥–æ–≤ –≤—Å–µ–≥–æ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 2 - –º–∞—Å—Ç–µ—Ä –∏ —Ä–µ–ø–ª–∏–∫–∞)
-  `successful` - –∫–æ–ª-–≤–æ —à–∞—Ä–¥–æ–≤ –≥–¥–µ –æ–ø–µ—Ä–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ
-  `failed` - –∫–æ–ª-–≤–æ —à–∞—Ä–¥–æ–≤ –≥–¥–µ –æ–ø–µ—Ä–∞—Ü–∏—è –≤—ã–∑–≤–∞–ª–∞ –æ—à–∏–±–∫—É

–ö–æ–≥–¥–∞ –∏–Ω–¥–µ–∫—Å —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–Ω –ø–æ–ª—É—á–∞–µ—Ç —à–∞—Ä–¥ –º–∞—Å—Ç–µ—Ä –∏ —Ä–µ–ø–ª–∏–∫–∞, –ø–µ—Ä–≤–∏—á–Ω—ã–π —à–∞—Ä–¥ –∏ —Ä–µ–ø–ª–∏–∫–∞ –Ω–µ –º–æ–≥—É—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –Ω–∞ –æ–¥–Ω–æ–º —É–∑–ª–µ, –ø–æ—Å–∫–æ–ª—å–∫—É –∫–ª–∞—Å—Ç–µ—Ä (–ø–æ –¥–µ—Ñ.) –∏–º–µ–µ—Ç –æ–¥–∏–Ω —É–∑–µ–ª —à–∞—Ä–¥ —Ä–µ–ø–ª–∏–∫–∏ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω —É–∑–ª—É –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ, –∞ –æ–ø–µ—Ä–∞—Ü–∏—è –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è —É—Å–ø–µ—à–Ω–∞ —Ç–æ–ª—å–∫–æ –Ω–∞ –ø–µ—Ä–≤–∏—á–Ω–æ–º —à–∞—Ä–¥–µ.

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ, –¥–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ –ø–æ–ª—è –∏–ª–∏ –∏–∑–º–µ–Ω–µ—è–º —Å—Ç–∞—Ä—ã–µ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –æ–Ω –∏–∑–º–µ–Ω–∏—Ç—å—Å—è (–∑–∞–º–µ–Ω–∏—Ç—Å—è, –ø–æ–ª—è –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –±—ã–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã - —É–¥–∞–ª—è—Ç—Å—è).

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —è–≤–ª—è–µ—Ç—Å—è 1 —Å–µ–∫., –µ—Å–ª–∏ –Ω—É–∂–µ–Ω –¥–æ–∫—É–º–µ–Ω—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞ —Å—Ä–∞–∑—É –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `refresh=true`

```
PUT /example4/person/3?refresh=true
```

–í–µ—Å—å –∏–Ω–¥–µ–∫—Å –º–æ–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é
```
POST example4/_refresh

# –∏–ª–∏ –≤—Å–µ –∏–Ω–¥–µ–∫—Å—ã
POST /_refresh
```

> `refresh` - –¥–æ—Ä–æ–≥–æ—Å—Ç–æ—è—â–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–æ–ª–µ–µ –¥–ª–∏—Ç–µ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (30 —Å–µ–∫),–µ—Å–ª–∏ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —á—Ç–æ–± –¥–æ–∫—É–º–µ–Ω—Ç—ã –±—ã–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —Å—Ä–∞–∑—É

```
PUT example4/_settings
 {
   "index": {
     "refresh_interval": "30s"
   }
 }
```

#### üîπ –û–ë–ù–û–í–õ–ï–ù–ò–Ø

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –∫–∞–∫–æ–µ-—Ç–æ –ø–æ–ª–µ(–¥–æ–±–∞–≤–∏—Ç—å) –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—è –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
```
POST /product/default/1/_update
{
	"doc":{"name":"PHP"}
}
```
> —Å–µ–∫—Ü–∏—è `"doc"` - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞

–ï—Å–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, —Ç–æ –ø—Ä–∏ —á–∞—Å—Ç–∏—á–Ω–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –æ—à–∏–±–∫–∞, —á—Ç–æ–± —ç—Ç–æ–≥–æ –∏–∑–±–µ–∂–∞—Ç—å (–∏ —Å–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç).
```
POST example4/person/3/_update
 {
   "doc": {
     "name": "user3"
   },
   "doc_as_upsert": true
 }
```

–ï—Å–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã(—Ç.–µ. –∑–∞–Ω–æ—Å—è—Ç—Å—è —Ç–µ–∂–µ –¥–∞–Ω–Ω—ã–µ), —Ç–æ –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –∏ –≤–µ—Ä–Ω–µ—Ç—Å—è –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ `noop`, –º–æ–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å —Ç–∞–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é
`"detect_noop" : "false"`

–ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å  –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—É—é –ª–æ–≥–∏–∫—É –∫ –¥–∞–Ω–Ω—ã–º.

==–¥–æ–±–∞–≤–∏—Ç –∫ —Ü–µ–Ω–µ —á–∏—Å–ª–æ 10==
```
POST /product/default/1/_update
{
	"scripts":"ctx._source.price += 10"
	"upsert":{    		//–µ—Å–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –≤—Å—Ç–≤–∫–∞
    	"price":3		//–∏–Ω–∞—á–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å—Å—è —Å–∫—Ä–∏–ø—Ç
  	}
}
```

==–¥–æ–±–∞–≤–∏—Ç –∫ —Ç–µ–≥–∞–º –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ==
```
POST /product/default/1/_update
{
	"script" : {
		"inline": "ctx._source.tags.add(params.tag)",
		"lang": "painless"
		"params": {
			"tag": "blue"
		}
	}
}
```
---
#### üîπ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å—Ä–∞–∑—É

```
POST /product/default/_bulk
{"index": {_id:100}} 	// –ø–µ—Ä–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
{"price": 100}			// –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
{"index": {_id:101}}	// –≤—Ç–æ—Ä–æ–π –¥–æ–∫—É–º–µ–Ω—Ç
{"price": 101}			// –¥–∞–Ω–Ω—ã–µ –≤—Ç–æ—Ä–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
```
---
#### üîπ –î–µ–π—Å—Ç–≤–∏—è –Ω–∞–¥ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏

```
POST /product/default/_bulk
{"update": {_id:100}} 		//–ø–æ–ª—É—á–∞–µ–º –ø–µ—Ä–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
{"doc": {"price": 500}}		//–æ–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
{"delete": {_id:101}}		//—É–¥–∞–ª—è–µ–º –≤—Ç–æ—Ä–æ–π –¥–æ–∫—É–º–µ–Ω—Ç
```
---